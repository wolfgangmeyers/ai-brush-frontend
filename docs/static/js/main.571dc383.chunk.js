(this["webpackJsonpai-brush-frontend"]=this["webpackJsonpai-brush-frontend"]||[]).push([[0],{35:function(e,t,n){},66:function(e,t){},92:function(e,t,n){"use strict";n.r(t);n(35);var r,a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},c=n(2),s=n(47),u=n(1),i=n.n(u),o=n(4),b=n(7),l=n(6),d=n(5),p=n(23),j=n.n(p),h=n(8),f=n.n(h),O=n(21),v=n(48),x=n(24),m=n(26),g=n(3),w=n(15),y=n(51),k="https://qb1eyw689j.execute-api.us-east-1.amazonaws.com/Prod".replace(/\/+$/,""),J=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;Object(O.a)(this,e),this.basePath=n,this.axios=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},R=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(e,r){var a;return Object(O.a)(this,n),(a=t.call(this,r)).field=e,a.name="RequiredError",a}return n}(Object(y.a)(Error)),I="https://example.com",C=function(e,t,n){if(null===n||void 0===n)throw new R(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},S=function(e){for(var t=new URLSearchParams(e.search),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var c=0,s=r;c<s.length;c++){var u=s[c];for(var i in u)if(Array.isArray(u[i])){t.delete(i);var o,b=Object(w.a)(u[i]);try{for(b.s();!(o=b.n()).done;){var l=o.value;t.append(i,l)}}catch(d){b.e(d)}finally{b.f()}}else t.set(i,u[i])}e.search=t.toString()},P=function(e,t,n){var r="string"!==typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},E=function(e){return e.pathname+e.search+e.hash},U=function(e,t,n,r){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s=Object(g.a)(Object(g.a)({},e.options),{},{url:((null===r||void 0===r?void 0:r.basePath)||c)+e.url});return a.request(s)}},L=function(e){var t=function(e){return{cancelJob:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("cancelJob","id",n),a="/jobs/{id}/cancel".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"POST"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),createJob:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},a=new URL("/jobs",I),e&&(c=e.baseOptions),s=Object(g.a)(Object(g.a)({method:"POST"},c),r),o={},(u={})["Content-Type"]="application/json",S(a,o,r.query),b=c&&c.headers?c.headers:{},s.headers=Object(g.a)(Object(g.a)(Object(g.a)({},u),b),r.headers),s.data=P(n,s,e),t.abrupt("return",{url:E(a),options:s});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteImage:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("deleteImage","id",n),a="/images/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"DELETE"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteJob:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("deleteJob","id",n),a="/jobs/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"DELETE"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteJobResult:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("deleteJobResult","id",n),a="/job-results/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"DELETE"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getImage:function(){var t=Object(o.a)(i.a.mark((function t(n,r){var a,c,s,u,o,b,l,d,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:{},C("getImage","id",n),c="/images/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),s=new URL(c,I),e&&(u=e.baseOptions),o=Object(g.a)(Object(g.a)({method:"GET"},u),a),b={},l={},void 0!==r&&(l.download=r),S(s,l,a.query),d=u&&u.headers?u.headers:{},o.headers=Object(g.a)(Object(g.a)(Object(g.a)({},b),d),a.headers),t.abrupt("return",{url:E(s),options:o});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getJob:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("getJob","id",n),a="/jobs/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"GET"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getJobResult:function(){var t=Object(o.a)(i.a.mark((function t(n,r){var a,c,s,u,o,b,l,d,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:{},C("getJobResult","id",n),c="/job-results/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),s=new URL(c,I),e&&(u=e.baseOptions),o=Object(g.a)(Object(g.a)({method:"GET"},u),a),b={},l={},void 0!==r&&(l.download=r),S(s,l,a.query),d=u&&u.headers?u.headers:{},o.headers=Object(g.a)(Object(g.a)(Object(g.a)({},b),d),a.headers),t.abrupt("return",{url:E(s),options:o});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getJobTask:function(){var t=Object(o.a)(i.a.mark((function t(){var n,r,a,c,s,u,o=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},r=new URL("/job-tasks",I),e&&(a=e.baseOptions),c=Object(g.a)(Object(g.a)({method:"GET"},a),n),s={},S(r,{},n.query),u=a&&a.headers?a.headers:{},c.headers=Object(g.a)(Object(g.a)(Object(g.a)({},s),u),n.headers),t.abrupt("return",{url:E(r),options:c});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),listImages:function(){var t=Object(o.a)(i.a.mark((function t(n,r){var a,c,s,u,o,b,l,d=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:{},c=new URL("/images",I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"GET"},s),a),o={},b={},void 0!==n&&(b.cursor=n),void 0!==r&&(b.direction=r),S(c,b,a.query),l=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),l),a.headers),t.abrupt("return",{url:E(c),options:u});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),listJobResults:function(){var t=Object(o.a)(i.a.mark((function t(n,r,a){var c,s,u,o,b,l,d,p,j=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=j.length>3&&void 0!==j[3]?j[3]:{},C("listJobResults","id",n),s="/jobs/{id}/results".replace("{".concat("id","}"),encodeURIComponent(String(n))),u=new URL(s,I),e&&(o=e.baseOptions),b=Object(g.a)(Object(g.a)({method:"GET"},o),c),l={},d={},void 0!==r&&(d.cursor=r),void 0!==a&&(d.direction=a),S(u,d,c.query),p=o&&o.headers?o.headers:{},b.headers=Object(g.a)(Object(g.a)(Object(g.a)({},l),p),c.headers),t.abrupt("return",{url:E(u),options:b});case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),listJobs:function(){var t=Object(o.a)(i.a.mark((function t(){var n,r,a,c,s,u,o=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},r=new URL("/jobs",I),e&&(a=e.baseOptions),c=Object(g.a)(Object(g.a)({method:"GET"},a),n),s={},S(r,{},n.query),u=a&&a.headers?a.headers:{},c.headers=Object(g.a)(Object(g.a)(Object(g.a)({},s),u),n.headers),t.abrupt("return",{url:E(r),options:c});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),saveJobResult:function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,s,u,o,b,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},C("saveJobResult","id",n),a="/job-results/{id}".replace("{".concat("id","}"),encodeURIComponent(String(n))),c=new URL(a,I),e&&(s=e.baseOptions),u=Object(g.a)(Object(g.a)({method:"PUT"},s),r),o={},S(c,{},r.query),b=s&&s.headers?s.headers:{},u.headers=Object(g.a)(Object(g.a)(Object(g.a)({},o),b),r.headers),t.abrupt("return",{url:E(c),options:u});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),submitJobResult:function(){var t=Object(o.a)(i.a.mark((function t(n,r){var a,c,s,u,o,b,l,d,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:{},C("submitJobResult","id",n),c="/jobs/{id}/results".replace("{".concat("id","}"),encodeURIComponent(String(n))),s=new URL(c,I),e&&(u=e.baseOptions),o=Object(g.a)(Object(g.a)({method:"POST"},u),a),l={},(b={})["Content-Type"]="application/json",S(s,l,a.query),d=u&&u.headers?u.headers:{},o.headers=Object(g.a)(Object(g.a)(Object(g.a)({},b),d),a.headers),o.data=P(r,o,e),t.abrupt("return",{url:E(s),options:o});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}(e);return{cancelJob:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.cancelJob(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},createJob:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.createJob(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},deleteImage:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.deleteImage(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},deleteJob:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.deleteJob(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},deleteJobResult:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.deleteJobResult(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},getImage:function(n,r,a){return Object(o.a)(i.a.mark((function c(){var s;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getImage(n,r,a);case 2:return s=c.sent,c.abrupt("return",U(s,f.a,k,e));case 4:case"end":return c.stop()}}),c)})))()},getJob:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getJob(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},getJobResult:function(n,r,a){return Object(o.a)(i.a.mark((function c(){var s;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getJobResult(n,r,a);case 2:return s=c.sent,c.abrupt("return",U(s,f.a,k,e));case 4:case"end":return c.stop()}}),c)})))()},getJobTask:function(n){return Object(o.a)(i.a.mark((function r(){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getJobTask(n);case 2:return a=r.sent,r.abrupt("return",U(a,f.a,k,e));case 4:case"end":return r.stop()}}),r)})))()},listImages:function(n,r,a){return Object(o.a)(i.a.mark((function c(){var s;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.listImages(n,r,a);case 2:return s=c.sent,c.abrupt("return",U(s,f.a,k,e));case 4:case"end":return c.stop()}}),c)})))()},listJobResults:function(n,r,a,c){return Object(o.a)(i.a.mark((function s(){var u;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.listJobResults(n,r,a,c);case 2:return u=s.sent,s.abrupt("return",U(u,f.a,k,e));case 4:case"end":return s.stop()}}),s)})))()},listJobs:function(n){return Object(o.a)(i.a.mark((function r(){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.listJobs(n);case 2:return a=r.sent,r.abrupt("return",U(a,f.a,k,e));case 4:case"end":return r.stop()}}),r)})))()},saveJobResult:function(n,r){return Object(o.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.saveJobResult(n,r);case 2:return c=a.sent,a.abrupt("return",U(c,f.a,k,e));case 4:case"end":return a.stop()}}),a)})))()},submitJobResult:function(n,r,a){return Object(o.a)(i.a.mark((function c(){var s;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.submitJobResult(n,r,a);case 2:return s=c.sent,c.abrupt("return",U(s,f.a,k,e));case 4:case"end":return c.stop()}}),c)})))()}}},T=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"cancelJob",value:function(e,t){var n=this;return L(this.configuration).cancelJob(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"createJob",value:function(e,t){var n=this;return L(this.configuration).createJob(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"deleteImage",value:function(e,t){var n=this;return L(this.configuration).deleteImage(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"deleteJob",value:function(e,t){var n=this;return L(this.configuration).deleteJob(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"deleteJobResult",value:function(e,t){var n=this;return L(this.configuration).deleteJobResult(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"getImage",value:function(e,t,n){var r=this;return L(this.configuration).getImage(e,t,n).then((function(e){return e(r.axios,r.basePath)}))}},{key:"getJob",value:function(e,t){var n=this;return L(this.configuration).getJob(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"getJobResult",value:function(e,t,n){var r=this;return L(this.configuration).getJobResult(e,t,n).then((function(e){return e(r.axios,r.basePath)}))}},{key:"getJobTask",value:function(e){var t=this;return L(this.configuration).getJobTask(e).then((function(e){return e(t.axios,t.basePath)}))}},{key:"listImages",value:function(e,t,n){var r=this;return L(this.configuration).listImages(e,t,n).then((function(e){return e(r.axios,r.basePath)}))}},{key:"listJobResults",value:function(e,t,n,r){var a=this;return L(this.configuration).listJobResults(e,t,n,r).then((function(e){return e(a.axios,a.basePath)}))}},{key:"listJobs",value:function(e){var t=this;return L(this.configuration).listJobs(e).then((function(e){return e(t.axios,t.basePath)}))}},{key:"saveJobResult",value:function(e,t){var n=this;return L(this.configuration).saveJobResult(e,t).then((function(e){return e(n.axios,n.basePath)}))}},{key:"submitJobResult",value:function(e,t,n){var r=this;return L(this.configuration).submitJobResult(e,t,n).then((function(e){return e(r.axios,r.basePath)}))}}]),n}(J);function _(){if(!r){var e=f.a;e.defaults.headers.common.apikey=localStorage.getItem("apikey");var t=localStorage.getItem("backend")||"https://qb1eyw689j.execute-api.us-east-1.amazonaws.com/Prod";r=new T(void 0,t,e)}return r}var q=n(32),G=n.n(q),D={};function M(e){var t=D[e];return t||((t=G.a.get(e))?(D[e]=t,t):null)}function F(e,t){D[e]=t,G.a.set(e,t)}var A=n(0),z=function(){var e=_(),t=Object(d.f)(),n=Object(c.useState)([""]),r=Object(l.a)(n,2),a=r[0],s=r[1],u=Object(c.useState)(100),p=Object(l.a)(u,2),h=p[0],f=p[1],O=Object(c.useState)(1),v=Object(l.a)(O,2),x=v[0],m=v[1],g=Object(c.useState)(""),w=Object(l.a)(g,2),y=w[0],k=w[1],J=Object(c.useState)(void 0),R=Object(l.a)(J,2),I=R[0],C=R[1],S=Object(c.useState)(.06),P=Object(l.a)(S,2),E=P[0],U=P[1],L=j.a.parse(window.location.search.substring(1));function T(){return(T=Object(o.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("phrases",a),n.next=3,e.createJob({count:x,iterations:h,phrases:a,label:y,parent:I});case 3:r=n.sent,t.push("/jobs/".concat(r.data.id));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function q(){return(q=Object(o.a)(i.a.mark((function t(n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C(n),!(r=M("results/"+n))){t.next=5;break}return s(r.phrases),t.abrupt("return");case 5:return t.next=7,e.getImage(n);case 7:a=t.sent,s(a.data.phrases);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){L.parent&&function(e){q.apply(this,arguments)}(L.parent)}),[L.parent]),Object(A.jsxs)("div",{style:{padding:"50px"},children:[Object(A.jsx)("h1",{children:"Generate images"}),Object(A.jsx)("hr",{}),Object(A.jsx)("label",{children:"Job Label:"}),"\xa0",Object(A.jsx)("input",{type:"text",value:y,onChange:function(e){return k(e.target.value)}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{children:"Phrases:"}),Object(A.jsx)("br",{}),a.map((function(e,t){return Object(A.jsxs)("div",{style:{marginBottom:"5px"},children:[Object(A.jsx)("input",{style:{marginRight:"5px"},type:"text",value:e,onChange:function(e){return function(e,t){s([].concat(Object(b.a)(a.slice(0,t)),[e],Object(b.a)(a.slice(t+1))))}(e.target.value,t)}},"phrase_".concat(t)),Object(A.jsx)("button",{onClick:function(){return e=t,void s([].concat(Object(b.a)(a.slice(0,e)),Object(b.a)(a.slice(e+1))));var e},disabled:1===a.length,children:"X"})]})})),Object(A.jsx)("button",{type:"button",onClick:function(){s([].concat(Object(b.a)(a),[""]))},children:"+ Add"}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{children:"Iterations:"}),"\xa0",Object(A.jsx)("input",{min:10,max:5e3,style:{width:"50px"},type:"number",value:h,onChange:function(e){return f(parseInt(e.target.value))}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{children:"Count:"}),"\xa0",Object(A.jsx)("input",{min:1,max:100,style:{width:"50px"},type:"number",value:x,onChange:function(e){return m(parseInt(e.target.value))}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{min:.01,max:.2,step:.01,style:{width:"50px"},type:"number",value:E,onChange:function(e){return U(parseFloat(e.target.value))}}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{children:"Parent:"}),"\xa0",I||"",Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)("button",{onClick:function(){return function(){return T.apply(this,arguments)}()},children:"Generate >>"})]})},B=n(10),N=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],s=Object(d.g)();return Object(c.useEffect)((function(){if(!r){var e=localStorage.getItem("apikey");if(!e){var t=j.a.parse(s.search.substring(1));t.apikey&&(e=t.apikey,localStorage.setItem("apikey",e),window.location.href="/")}e&&a(e)}}),[r,s.search]),r?Object(A.jsx)("div",{children:e.children}):Object(A.jsx)("div",{children:"Unauthorized"})},X=function(e){var t=_(),n=Object(c.useState)(void 0),r=Object(l.a)(n,2),a=r[0],s=r[1];function u(){return(u=Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listJobs();case 2:(n=e.sent).data.jobs&&s(n.data.jobs);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(o.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteJob(n);case 2:a&&void 0!==(r=a.findIndex((function(e){return e.id===n})))&&r>=0&&s([].concat(Object(b.a)(a.slice(0,r)),Object(b.a)(a.slice(r+1))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){a||(s([]),function(){u.apply(this,arguments)}())}),[a]),Object(A.jsx)("div",{style:{padding:"50px"},children:Object(A.jsxs)("table",{children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"ID"}),Object(A.jsx)("th",{children:"Label"}),Object(A.jsx)("th",{children:"Count"}),Object(A.jsx)("th",{children:"Iterations"}),Object(A.jsx)("th",{children:"Action"})]})}),Object(A.jsx)("tbody",{children:a&&a.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:Object(A.jsx)(B.b,{to:"/jobs/".concat(e.id),children:e.id})}),Object(A.jsx)("td",{children:e.label}),Object(A.jsx)("td",{children:e.count}),Object(A.jsx)("td",{children:e.iterations}),Object(A.jsx)("td",{children:Object(A.jsx)("button",{onClick:function(){return function(e){return d.apply(this,arguments)}(e.id)},children:"Delete"})})]},e.id)}))})]})})},$=function(){var e=Object(c.useState)(void 0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(l.a)(a,2),u=s[0],p=s[1],j=Object(c.useState)(void 0),h=Object(l.a)(j,2),f=h[0],O=h[1],v=Object(d.h)(),x=_(),m=Object(d.f)();function g(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loadParent"),!(n=M("results/"+t+"_thumbnail"))){e.next=7;break}console.log("cached",n),O(n),e.next=13;break;case 7:return console.log("Loading parent"),e.next=10,x.getImage(t,"thumbnail");case 10:r=e.sent,F("results/"+t+"_thumbnail",r.data),O(r.data);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(o.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=M("results/"+v.job))){e.next=10;break}if(r(n=t),!n.parent){e.next=7;break}return e.next=7,g(n.parent);case 7:return e.next=9,J();case 9:return e.abrupt("return");case 10:return e.next=12,x.getJob(v.job);case 12:if(a=e.sent,F("results/"+v.job,a.data),r(a.data),!a.data.parent){e.next=18;break}return e.next=18,g(a.data.parent);case 18:return e.next=20,J();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(i.a.mark((function e(){var t,n,r,a,c,s,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.listJobResults(v.job);case 2:if(!(t=e.sent).data.results){e.next=15;break}return n=[],r=[],t.data.results.forEach((function(e){var t=M("results/"+e.id+"_thumbnail");t?r.push(t):n.push(e)})),e.next=9,Promise.all(n.map((function(e){return x.getJobResult(e.id,"thumbnail")})));case 9:a=e.sent,c=Object(w.a)(a);try{for(c.s();!(s=c.n()).done;)F("results/"+(u=s.value).data.id+"_thumbnail",u.data)}catch(i){c.e(i)}finally{c.f()}(o=[].concat(Object(b.a)(a.map((function(e){return e.data}))),r)).sort((function(e,t){return e.score-t.score})),p(o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function e(){var t,n,r,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==u.length){e.next=3;break}return J(),e.abrupt("return");case 3:return t=Math.max.apply(Math,Object(b.a)(u.map((function(e){return e.created})))),e.next=6,x.listJobResults(v.job,t,"forward");case 6:if(!(n=e.sent).data.results){e.next=14;break}return e.next=10,Promise.all(n.data.results.map((function(e){return x.getJobResult(e.id)})));case 10:r=e.sent,a=Object(w.a)(r);try{for(a.s();!(c=a.n()).done;)F("results/"+(s=c.value).data.id+"_thumbnail",s.data)}catch(i){a.e(i)}finally{a.f()}p((function(e){return[].concat(Object(b.a)(r.map((function(e){return e.data}))),Object(b.a)(e))}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.cancelJob(v.job);case 2:alert("Job cancelled");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){n&&n.id===v.job||function(){k.apply(this,arguments)}();var e=setInterval((function(){!function(){I.apply(this,arguments)}()}),1e4);return function(){return clearInterval(e)}}),[v.job,n]),n&&Object(A.jsxs)("div",{style:{padding:"50px"},children:["Label: ",n.label,Object(A.jsx)("br",{}),"Phrases: ",n.phrases&&n.phrases.join(", "),Object(A.jsx)("br",{}),"Iterations: ",n.iterations,Object(A.jsx)("br",{}),"Count: ",n.count,Object(A.jsx)("br",{}),"Results: ",u.length,Object(A.jsx)("br",{}),Object(A.jsx)("button",{onClick:function(){return function(){return C.apply(this,arguments)}()},children:"Cancel"}),Object(A.jsx)("br",{}),f&&Object(A.jsxs)("div",{style:{margin:"10px",border:"1px solid black",padding:"5px"},children:["Parent: ",Object(A.jsx)("img",{style:{width:"256px",cursor:"pointer"},src:"data:image/jpeg;base64,".concat(f.encoded_thumbnail)})]}),Object(A.jsx)("hr",{}),u.map((function(e){return Object(A.jsxs)("div",{style:{margin:"10px",float:"left",border:"1px solid black",padding:"5px"},children:[Object(A.jsx)("img",{onClick:function(){return m.push("/job-results/".concat(e.id))},style:{width:"256px",cursor:"pointer"},src:"data:image/jpeg;base64,".concat(e.encoded_thumbnail)}),Object(A.jsx)("br",{}),"Score: ",e.score]},e.id)}))]})||Object(A.jsx)("div",{})},H=function(){var e=Object(d.h)(),t=_(),n=Object(d.f)(),r=Object(c.useState)(void 0),a=Object(l.a)(r,2),s=a[0],u=a[1];function b(){return(b=Object(o.a)(i.a.mark((function n(){var r,a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=M("results/"+e.result+"_image"))){n.next=4;break}return u(r),n.abrupt("return");case 4:return n.next=6,t.getJobResult(e.result,"image");case 6:a=n.sent,F("results/"+e.result+"_image",a.data),u(a.data);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteJobResult(null===s||void 0===s?void 0:s.id);case 2:n.push("/jobs/".concat(null===s||void 0===s?void 0:s.job_id));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveJobResult(null===s||void 0===s?void 0:s.id);case 2:n.push("/jobs/".concat(null===s||void 0===s?void 0:s.job_id));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveJobResult(null===s||void 0===s?void 0:s.id);case 2:n.push("/?parent=".concat(null===s||void 0===s?void 0:s.id));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s&&s.id===e.result||function(){b.apply(this,arguments)}()}),[s,e.result]),Object(A.jsxs)("div",{style:{padding:"50px"},children:[Object(A.jsx)("button",{onClick:function(){n.push("/jobs/".concat(null===s||void 0===s?void 0:s.job_id))},children:"Cancel"}),Object(A.jsx)("button",{onClick:function(){return function(){return p.apply(this,arguments)}()},children:"Delete"}),Object(A.jsx)("button",{onClick:function(){return function(){return j.apply(this,arguments)}()},children:"Save"}),Object(A.jsx)("button",{onClick:function(){return function(){return h.apply(this,arguments)}()},children:"Save and fork"}),Object(A.jsx)("hr",{}),s&&Object(A.jsx)("img",{style:{width:"512px"},src:"data:image/jpeg;base64,".concat(s.encoded_image)})]})},K=n(50),Q=n.n(K),V=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(d.f)(),s=_();function u(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(t){var n,a,c,u,o,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||Q()().valueOf(),e.next=3,s.listImages(t,"reverse");case 3:if(!(n=e.sent).data.images){e.next=15;break}return a=[],c=[],n.data.images.forEach((function(e){var t=M("images/"+e.id+"_thumbnail");t?c.push(t):a.push(e)})),e.next=10,Promise.all(a.map((function(e){return s.getImage(e.id,"thumbnail")})));case 10:u=e.sent,o=Object(w.a)(u);try{for(o.s();!(l=o.n()).done;)F("images/"+(d=l.value).data.id+"_thumbnail",d.data)}catch(i){o.e(i)}finally{o.f()}p=[].concat(Object(b.a)(u.map((function(e){return e.data}))),c),r((function(e){return(p=[].concat(Object(b.a)(e),Object(b.a)(p))).sort((function(e,t){return t.created-e.created})),p}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){r([]),u()}),[]),Object(A.jsxs)("div",{style:{padding:"50px"},children:[n.map((function(e){return Object(A.jsx)("div",{style:{margin:"10px",float:"left",border:"1px solid black",padding:"5px"},children:Object(A.jsx)("img",{onClick:function(){return a.push("/images/".concat(e.id))},style:{width:"256px",cursor:"pointer"},src:"data:image/jpeg;base64,".concat(e.encoded_thumbnail)})},e.id)})),Object(A.jsx)("div",{style:{margin:"10px",float:"left",border:"1px solid black",padding:"5px"},children:Object(A.jsx)("button",{onClick:function(){u(Math.min.apply(Math,Object(b.a)(n.map((function(e){return e.created})))))},style:{width:"256px",height:"256px"},children:"Load More"})})]})},W=function(){var e=Object(d.h)(),t=_(),n=Object(d.f)(),r=Object(c.useState)(void 0),a=Object(l.a)(r,2),s=a[0],u=a[1];function b(){return(b=Object(o.a)(i.a.mark((function n(){var r,a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=M("/images/"+e.image+"_image"))){n.next=4;break}return u(r),n.abrupt("return");case 4:return n.next=6,t.getImage(e.image,"image");case 6:a=n.sent,F("images/"+e.image+"_image",a.data),u(a.data);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteImage(null===s||void 0===s?void 0:s.id);case 2:n.push("/images");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push("/?parent=".concat(null===s||void 0===s?void 0:s.id));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s&&s.id===e.image||function(){b.apply(this,arguments)}()}),[s,e.image]),Object(A.jsxs)("div",{style:{padding:"50px"},children:[Object(A.jsx)("button",{onClick:function(){return function(){return j.apply(this,arguments)}()},children:"Fork"}),Object(A.jsx)("button",{onClick:function(){n.push("/images")},children:"Cancel"}),Object(A.jsx)("button",{onClick:function(){return function(){return p.apply(this,arguments)}()},children:"Delete"}),Object(A.jsx)("hr",{}),s&&Object(A.jsx)("img",{style:{width:"512px"},src:"data:image/jpeg;base64,".concat(s.encoded_image)})]})};var Y=function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(B.b,{to:"/",children:"Create new Job"}),"\xa0",Object(A.jsx)(B.b,{to:"/jobs",children:"Jobs"}),"\xa0",Object(A.jsx)(B.b,{to:"/images",children:"Images"}),Object(A.jsx)("div",{style:{float:"right"},children:Object(A.jsx)("button",{onClick:function(e){return function(){var e=prompt("Set backend url (blank to reset to default)");null!==e&&(e?localStorage.setItem("backend",e):localStorage.removeItem("backend"),window.location.href="/")}()},children:"Set backend"})})]})},Z=function(){return Object(A.jsx)(B.a,{children:Object(A.jsxs)(N,{children:[Object(A.jsx)(Y,{}),Object(A.jsxs)(d.c,{children:[Object(A.jsx)(d.a,{path:"/",exact:!0,children:Object(A.jsx)(z,{})}),Object(A.jsx)(d.a,{path:"/jobs",exact:!0,children:Object(A.jsx)(X,{})}),Object(A.jsx)(d.a,{path:"/jobs/:job",children:Object(A.jsx)($,{})}),Object(A.jsx)(d.a,{path:"/job-results/:result",children:Object(A.jsx)(H,{})}),Object(A.jsx)(d.a,{path:"/images",exact:!0,children:Object(A.jsx)(V,{})}),Object(A.jsx)(d.a,{path:"/images/:image",exact:!0,children:Object(A.jsx)(W,{})})]})]})})};Object(s.render)(Object(A.jsx)(Z,{}),document.getElementById("root")),a()}},[[92,1,2]]]);
//# sourceMappingURL=main.571dc383.chunk.js.map